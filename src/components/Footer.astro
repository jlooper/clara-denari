---
import { translations } from '../i18n/translations.js';
---

<footer class="text-center p-4 text-green-500" style="text-shadow: 0 0 5px rgba(0, 255, 0, 0.5);">
  <p id="footer-text" data-translation-key="footer.copyright">
  </p>
</footer>

<script define:vars={{ translations }}>
  document.addEventListener('DOMContentLoaded', () => {
    function getCurrentLanguage() {
      return localStorage.getItem('preferred-language') || 'en';
    }

    function getTranslation(key) {
      const currentLang = getCurrentLanguage();
      const fallbackLang = currentLang === 'pt-br' ? 'en' : currentLang;
      return translations[key]?.[fallbackLang] || translations[key]?.en || key;
    }

    function updateFooterText() {
      const footerElement = document.getElementById('footer-text');
      if (footerElement) {
        const currentYear = new Date().getFullYear();
        const copyrightText = getTranslation('footer.copyright');
        footerElement.innerHTML = `&copy; ${currentYear} Cloudinary. ${copyrightText}`;
        
        // Add click handler to the about link
        const aboutLink = footerElement.querySelector('a[href="about"]');
        if (aboutLink) {
          aboutLink.addEventListener('click', (e) => {
            e.preventDefault();
            if (window.openAboutModal) {
              window.openAboutModal();
            }
          });
        }
      }
    }

    // Initial load
    updateFooterText();

    // Listen for language changes
    window.addEventListener('language-changed', updateFooterText);
    document.addEventListener('language-changed', updateFooterText);
  });
</script> 