---
export interface Props {
  url?: string;
  instructions?: string;
  action: string;
  condition?: string;
  resultText?: string;
  showResultOnly?: boolean;
}

const { url, instructions = "", action, condition = "none", resultText = "", showResultOnly = false } = Astro.props;
---

<div class="page-navigation">
  {instructions && <p class="mb-4 text-amber-500">{instructions}</p>}
  
  <button 
    class="bg-black text-green-500 border-2 border-amber-500 px-6 py-3 rounded-lg hover:bg-green-500 hover:text-black transition-colors duration-200 font-bold text-lg"
    style="text-shadow: 0 0 5px rgba(244, 227, 153, 0.242);"
    data-url={url}
    data-condition={condition}
    data-result-text={resultText}
    data-show-result-only={showResultOnly}
    id={`page-btn-${url || 'result'}`}
  >
    {action}
  </button>
</div>

<script>
  // Add event listener when DOM is loaded
  document.addEventListener('DOMContentLoaded', () => {
    // Find all page navigation buttons
    const pageButtons = document.querySelectorAll('[data-url], [data-show-result-only]');
    pageButtons.forEach(button => {
      button.addEventListener('click', () => {
        const url = button.getAttribute('data-url');
        const condition = button.getAttribute('data-condition');
        const resultText = button.getAttribute('data-result-text');
        const showResultOnly = button.getAttribute('data-show-result-only') === 'true';
        
        // If there's result text, show it in the notification panel
        if (resultText) {
          if (typeof window !== 'undefined' && (window as any).showNotificationPanel) {
            (window as any).showNotificationPanel(resultText, 4000);
          }
        }
        
        // If showResultOnly is true, don't navigate
        if (showResultOnly) {
          return;
        }
        
        // Check condition if specified
        if (condition && condition !== 'none') {
          // For now, we'll just navigate - condition logic can be added later
        }
        
        // Navigate to the page if URL is provided
        if (url) {
          window.location.href = `/${url}`;
        }
      });
    });
  });
</script> 